{% load commit_tags %}
<div class="tree" id="tree_{{repo_name}}_{{branch_name}}" >

	<ul class="breadcrumbs">
		<li><a href="{% url stratus-tree-view repo_name branch_name "" %}" class="ajax" rel="#working_tree" >//</a> </li>
		{% for crumb in breadcrumbs %}
		<li><a href="{% url stratus-tree-view repo_name branch_name crumb.1 %}" class="ajax" rel="#working_tree" >{{crumb.0}}</a>/</li>
		{% endfor %}
		<li>{{ dir_path|last }}/</li>
	</ul>


	<ul class="list">
		{% if dir_path.0 %}
		<li><a href="./" class="ajax" rel="#pages" >..</a>
		{% endif %}

		{% for element in tree %}
		<li class="{{ element.type }}">
			{% if element.type == "tree" %}
				<a href="{% url stratus-tree-view repo_name branch_name element.path %}" class="ajax" rel="#working_tree" title="{{ element.name }}/">{{ element.name }}/</a>
			{% else %}
				<a href="{% url stratus-edit-file repo_name branch_name element.path %}" class="ajax" rel="#pages" title="{{ element.name }}" >{{ element.name }}</a>
				<small>{{ element.size|filesizeformat }}</small>

			{% endif %}
			{# <small>commit: <a href="{% url stratus-commit-view repo_name branch_name element.hexsha %}">{{ element.hexsha|truncatechars:16 }}</a></small> #}
			<a href="{% url stratus-delete-file repo_name branch_name element.path %}" class="delete ajax" rel="#toolbox" title="delete">x</a>
			<a href="{% url stratus-rename-file repo_name branch_name element.path %}" class="rename ajax" rel="#toolbox" >rename</a>
		</li>
		{% endfor %}
	</ul>

	<p class="new_file">NEW FILE</p>

	<form enctype="multipart/form-data" action="{% url stratus-upload-file  repo_name branch_name %}" method="post" class="ajax" rel="#pages" >
		{{ upload_form.as_p }}
		{% csrf_token %}
		<button>UPLOAD</button>
	</form>
</div>