(function(a){a.minimal=a.$m=a.minimal||function(){var a=function(a,b,c){a!==undefined&&c!==undefined&&(a.dataset?a.dataset[b]=c:a.setAttribute("data-"+b,c));return a?a.dataset?a.dataset[b]:a.getAttribute("data-"+b):undefined},b={},c=function(c,d,e){(d&&a(d,"render")in b?b[a(d,"render")]:e)(c,d)},d={pre:{},post:{}},e=function(a,b,c){for(var d in a)if(a[d](b,c)===!1)return!1},f=function(a,b){return a.querySelector(b)},g=function(){},h=function(b,c,d){c=c||b.parentNode;return d&&a(c,"mode")==="prepend"?c.insertBefore(b.cloneNode(!0),d):c.appendChild(b.cloneNode(!0))},i=function(a,b){c(a,b,function(b,c){for(var d in b)l(a[d],d)})},j=function(b,d){d._cache=d._cache||d.removeChild(d.children[0]),a(d,"mode")||(d.innerHTML="");var e=d.children[0];for(var f in b)c(b[f],h(d._cache,d,e),l)},k=function(b,c){switch(a(c,"mode")){case"append":c.innerHTML+=b;break;case"prepend":c.innerHTML=b+c.innerHTML;break;default:c.innerHTML=b}},l=function(b,g){var h=g!==undefined,m=g&&g.parentNode?g.parentNode:document;g=g===undefined?document.documentElement:typeof g=="string"?document.getElementById(g)||m.getElementsByClassName(g)[0]||m.getElementsByTagName(g)[0]||f(m,g):g;if(typeof Element!="function"&&typeof Element!="object"||g instanceof Element){if(e(d.pre,b,g)===!1)return m.removeChild(g);c(b,g,function(b,c){switch(Object.prototype.toString.call(b)){case"[object Object]":h&&!a(g,"render")&&a(g,"render","children"),i(b,c);break;case"[object Array]":j(b,c);break;default:k(b,c)}});if(e(d.post,b,g)===!1)return m.removeChild(g)}else l.exceptionHandler()};l.dataset=a,l.custom=b,l.querySelector=f,l.exceptionHandler=g,l.render=l,l.filters=d;return l}(),a.$m.custom.attr=function(b,c){for(var d in b)d==="content"?typeof b[d]=="object"?a.$m.render(b[d],c):c.innerHTML=b[d]:c.setAttribute(d,b[d])},a.$m.custom.children=function(b,c){var d=Object.prototype.toString.call(b)==="[object Object]"?b:[].concat(b);for(var e in d)a.$m.render(d[e],c.children[e]||c.getElementsByClassName(e)[0]||c.getElementsByTagName(e)[0]||a.$m.querySelector(c,e))},function(){var a=/(\$\w+)/g;String.prototype.template=String.prototype.t=String.prototype.template||function(){if(arguments[0]instanceof Array)return arguments[0].map(this.t,this).join("");var b=typeof arguments[0]=="object"?arguments[0]:arguments;return this.replace(a,function(a){return b[a.substr(1)]})};if(typeof Element=="function"||typeof Element=="object")Element.prototype.template=Element.prototype.t=Element.prototype.template||function(){this._tcache=this._tcache||this.innerHTML,this.innerHTML=this._tcache.t.apply(this._tcache,arguments)}}(),a.$m.custom.nano=function(a,b){b.template(a)}})(typeof exports!="undefined"?exports:window)